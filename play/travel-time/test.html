<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="js/travel-time.js"></script>
  </head>
  <body>
    <form>
      <p>
        <label>longitude, latitude: <input id="location" value="37.7631,-122.4191" type="text"></label>
        <input type="submit">
      </p>
      <textarea id="output"></textarea>
    </form>
    <script>
      var form = d3.select("form")
            .on("submit", submit),
          input = form.select("input"),
          output = form.select("textarea"),
          req;

      function submit() {
        d3.event.preventDefault();
        var loc = input.property("value");

        if (req) req.abort();

        req = mtc.location2taz(loc, function(error, taz) {
          if (error) {
            output.classed("error", true).text(error);
          } else {
            output.classed("error", false).text(taz);
          }
        });
      }
    </script>
  </body>
</html>
